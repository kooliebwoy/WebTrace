import{a0 as M,A as x,a1 as L,h as T,a2 as H,a3 as S,j as C,p as D,f as F,n as N,a as P}from"./B2IzWbAD.js";import{l as g,c as j,a as I}from"./DjbUwmZ6.js";import{I as O,s as R}from"./B8NHcvEE.js";import{s as U,r as V}from"./DUzfTGf7.js";import{i as q,a as z,b as J,c as B}from"./CyDalvIn.js";function tt(t,e,c){M(()=>{var o=x(()=>e(t,c==null?void 0:c())||{});if(c&&(o!=null&&o.update)){var a=!1,r={};L(()=>{var n=c();T(n),a&&H(r,n)&&(r=n,o.update(n))}),a=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}function at(t,e,c=e){var o=S();g(t,"input",a=>{var r=a?t.defaultValue:t.value;if(r=d(t)?f(r):r,c(r),o&&r!==(r=e())){var n=t.selectionStart,i=t.selectionEnd;t.value=r??"",i!==null&&(t.selectionStart=n,t.selectionEnd=Math.min(i,t.value.length))}}),(C&&t.defaultValue!==t.value||x(e)==null&&t.value)&&c(d(t)?f(t.value):t.value),L(()=>{var a=e();d(t)&&a===f(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function d(t){var e=t.type;return e==="number"||e==="range"}function f(t){return t===""?null:+t}function et(t,e){D(e,!0);let c=V(e,["$$slots","$$events","$$legacy"]);O(t,U({name:"circle-x"},()=>c,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(a,r)=>{var n=j(),i=F(n);R(i,()=>e.children??N),I(a,n)},$$slots:{default:!0}})),P()}function G(t){const e=JSON.parse(t);return e.data&&(e.data=J(e.data,B.decoders)),e}function m(t){return HTMLElement.prototype.cloneNode.call(t)}function rt(t,e=()=>{}){const c=async({action:a,result:r,reset:n=!0,invalidateAll:i=!0})=>{r.type==="success"&&(n&&HTMLFormElement.prototype.reset.call(t),i&&await q()),(location.origin+location.pathname===a.origin+a.pathname||r.type==="redirect"||r.type==="error")&&await z(r)};async function o(a){var y,v,w,A,E;if(((y=a.submitter)!=null&&y.hasAttribute("formmethod")?a.submitter.formMethod:m(t).method)!=="post")return;a.preventDefault();const n=new URL((v=a.submitter)!=null&&v.hasAttribute("formaction")?a.submitter.formAction:m(t).action),i=(w=a.submitter)!=null&&w.hasAttribute("formenctype")?a.submitter.formEnctype:m(t).enctype,u=new FormData(t),p=(A=a.submitter)==null?void 0:A.getAttribute("name");p&&u.append(p,((E=a.submitter)==null?void 0:E.getAttribute("value"))??"");const b=new AbortController;let h=!1;const $=await e({action:n,cancel:()=>h=!0,controller:b,formData:u,formElement:t,submitter:a.submitter})??c;if(h)return;let l;try{const s=new Headers({accept:"application/json","x-sveltekit-action":"true"});i!=="multipart/form-data"&&s.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(i)?i:"application/x-www-form-urlencoded");const k=i==="multipart/form-data"?u:new URLSearchParams(u),_=await fetch(n,{method:"POST",headers:s,cache:"no-store",body:k,signal:b.signal});l=G(await _.text()),l.type==="error"&&(l.status=_.status)}catch(s){if((s==null?void 0:s.name)==="AbortError")return;l={type:"error",error:s}}await $({action:n,formData:u,formElement:t,update:s=>c({action:n,result:l,reset:s==null?void 0:s.reset,invalidateAll:s==null?void 0:s.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",o),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",o)}}}export{et as C,tt as a,at as b,rt as e};
